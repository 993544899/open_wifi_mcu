# smart_air_quality_demo：模拟智能空气检测仪
------------------------------------------

## 开发演示视频

![模拟智能空气检测仪-演示视频](https://smart-img.5itianyuan.com/open/smart_air_quality_detector_demo.mp4)

## 功能说明

> 基于甜园智能云平台开发板，驱动YW1051灰尘传感器采集Pm2.5数值，模拟智能空气检测仪

## 硬件操作说明

> KEY2长按入网（3S），当长按**KEY2**按键，**LED4**进入闪烁状态开发板开始入网，通过**甜园app[添加设备步骤](app_add_wifidevelopboard.md)**,入网添加开发板设备，当wifi模块入网成功LED4指示灯常亮，并且wifi状态指示灯常亮

> 通过甜园APP添加开发板成功后，在app打开设备会接收到开发板采集的Pm2.5数据，点击PM2.5数据显示栏，会跳转到数据采集的历史曲线图方便查看历史数据

## Demo程序结构介绍

#### 系统时钟、定时器以及外围接口的初始化等

> RCC时钟配置，NVIC配置，初始化Time2定时器用于计时，初始化按键，初始化LED灯等外围设备

#### 串口透传数据解析

> 初始化uart3，波特率为115200，根据甜园智能云平台的wifi串口协议，进行数据的传输以及解析。

#### YW1051驱动

> 将[YW1051灰尘传感器](YW-1051_data_sheet.pdf)的VCC与GND分别接到开发板5V供电与GND脚，并将传感器的TX数据发送脚接到UART2的RX脚，初始化UART2波特率为2400作为传感器数据接收接口，初始化Timer3用于定时采集传感器数据并上报

#### 按键控制功能

> 初始化按键KEY2，并初始化LED4，其中LED4用于wifi入网状态显示操作，PB15开漏输出用于RSTwifi模块

> 采用轮询方式对按键监控处理，通过按键的动作执行入网等操作，并将该动作通过协议帧格式发送给wifi并上报到甜园云服务器，实现智能化控制。

## 注意

>[甜园云平台开发板开发使用注意事项](warning.md)
